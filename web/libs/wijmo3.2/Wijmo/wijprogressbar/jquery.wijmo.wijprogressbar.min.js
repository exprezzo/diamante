var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijmo-wijprogressbar",i="ui-progressbar",s=i+"-label",o=r+"-lb-",u="ui-corner-",a=u+"left",f=u+"right",l=u+"top",c=u+"bottom",h=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){return n.ui.progressbar.prototype._create.apply(this,arguments)},t.prototype._destroy=function(){return n.ui.progressbar.prototype._destroy.apply(this,arguments)},t.prototype._setOptions=function(){return n.ui.progressbar.prototype._setOptions.apply(this,arguments)},t.prototype._setOption=function(e,t){return n.ui.progressbar.prototype._setOption.apply(this,arguments)},t.prototype._constrainedValue=function(e){return n.ui.progressbar.prototype._constrainedValue.apply(this,arguments)},t.prototype.value=function(e){return n.ui.progressbar.prototype.value.apply(this,arguments)},t.prototype._percentage=function(){return n.ui.progressbar.prototype._percentage.apply(this,arguments)},t.prototype._refreshValue=function(e){return n.ui.progressbar.prototype._refreshValue.apply(this,arguments)},t}(e.JQueryUIWidget);t.JQueryUIProgress=h;var p=function(){function e(){this.labelAlign="center",this.maxValue=100,this.minValue=0,this.fillDirection="east",this.labelFormatString="{1}%",this.toolTipFormatString="{1}%",this.indicatorIncrement=1,this.indicatorImage="",this.animationDelay=0,this.animationOptions={disabled:!1,easing:null,duration:500},this.progressChanging=null,this.beforeProgressChanging=null,this.progressChanged=null,this.value=0}return e}(),d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._setOption=function(e,t){var r=this,i=r.options,s;switch(e){case"value":i[e]=parseInt(t,10),r._refreshValue();return;case"maxValue":i.max=t;case"minValue":s=parseInt(t,10),i[e]=s,r[e==="maxValue"?"max":"min"]=s,r._refreshValue(!0);return;case"labelFormatString":case"toolTipFormatString":i[e]=t,r._refreshValue(!0);return;case"fillDirection":case"labelAlign":case"indicatorImage":i[e]=t,r._updateElementsCss();return;default:}n.Widget.prototype._setOption.apply(r,arguments),e==="disabled"&&r._handleDisabledOption(t,r.element)},t.prototype._create=function(){var t=this,i=t.options,o=t.element;t.directions={east:"left",west:"right",north:"bottom",south:"top"},t.min=i.minValue,t.max=i.max=i.maxValue,o.addClass(r),e.prototype._create.call(this),t.label=n("<span>").addClass(s).appendTo(o),t._updateElementsCss(),t._isInit=!0,i.disabled&&t.disable(),t._refreshValue()},t.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},t.prototype._createDisabledDiv=function(e){var t=this,r=e?e:t.element,i=r.offset(),s=r.outerWidth(),o=r.outerHeight(),u={"z-index":"99999",position:"absolute",width:s,height:o,left:i.left,top:i.top};return n.browser.msie&&n.extend(u,{"background-color":"#fff",opacity:.1}),n("<div></div>").addClass("ui-disabled").css(u)},t.prototype._triggerEvent=function(e,t,n,r){if(!r)return;return this._trigger(e,null,{oldValue:t,newValue:n})===!1},t.prototype._refreshValue=function(e){var t=this,r=t.options,i,s=r.animationOptions,o=r.indicatorIncrement,u=t.element,a,f,l;if(!t._isInit)return;l=u.attr("aria-valuenow"),a=t.value(),f=(a-t.min)/(t.max-t.min)*100,i=parseInt(l)!=a;if(t._triggerEvent("beforeProgressChanging",l,a,i))return;!s.disabled&&s.duration>0?setTimeout(function(){n.wijmo.wijprogressbar.animations.progress({content:t.valueDiv,complete:function(){o!==1&&(t._refreshProgress(f,a,i),r.labelAlign==="running"&&t._updateRunningLabelCss(f)),t._triggerEvent("progressChanged",l,a,i),t._lastStep=f},step:function(n){t._performAnimating(n,e,i)},progressValue:a*100},s)},r.animationDelay):(t._refreshProgress(Math.round(f)),r.labelAlign==="running"&&t._updateRunningLabelCss(f),t._lastStep=f,t._triggerEvent("progressChanged",l,a,i))},t.prototype._refreshProgress=function(e,t,r){var i=this,s=i.options,o=s.fillDirection,u=i.element;t===undefined&&(t=n.wijmo.wijprogressbar.mul(e,i.max-i.min)/100+i.min);if(i._triggerEvent("progressChanging",u.attr("aria-valuenow"),t,r))return;i._isHorizontal()?i.valueDiv.toggleClass(o==="east"?f:a,t===i.max).width(e+"%"):i.valueDiv.toggleClass(o==="south"?c:l,t===i.max).height(e+"%"),i.label.html(i._getFormatString(s.labelFormatString,e,t)),u.attr("aria-valuenow",t).attr("title",i._getFormatString(s.toolTipFormatString,e,t))},t.prototype._isHorizontal=function(){var e=this.options.fillDirection;return e==="west"||e==="east"},t.prototype._getRotateTextOffset=function(e){var t,n;return e.css("width","auto"),t=e.outerWidth(),n=e.outerHeight(),e.css("width",""),Math.max(t-n-4,0)},t.prototype._updateElementsCss=function(){var e=this,t=e.options,n=e.element,i=t.fillDirection;n.removeClass(r+"-west "+r+"-east "+r+"-north "+r+"-south").addClass(r+"-"+i),e._updateProgressCss(),e._updateLabelCss()},t.prototype._updateLabelCss=function(){var e=this,t=e.options,r=e.element,i=t.labelAlign,s=e.label,u=e._lastStep,a=r.height();s.removeClass(o+"west "+o+"east "+o+"south "+o+"north "+o+"center "+o+"running").addClass(o+i).css({left:"",right:"",top:"",bottom:"",width:"","text-align":"","line-height":""}),i!=="north"&&i!=="south"&&(i!=="running"||!!e._isHorizontal())&&s.css("line-height",a+"px"),i==="running"?e._updateRunningLabelCss(u):!e._isHorizontal()&&!n.browser.msie&&(i==="north"?s.css("width","100%").css("text-align","right"):i==="south"&&s.css("width","100%").css("text-align","left"))},t.prototype._updateRunningLabelCss=function(e){var t=this,r=t.options,i=r.fillDirection,s=t.element,o=t.label,u=t.valueDiv,a=t._isHorizontal(),f,l,c,h;f=s[a?"width":"height"](),l=o[a?"outerWidth":"outerHeight"](),c=u[a?"outerWidth":"outerHeight"](),!a&&!n.browser.msie&&(l+=t._getRotateTextOffset(o)),h=f===c?f-l:e*f/100-l+l*(f-c)/f,o.css(t.directions[i],h)},t.prototype._updateProgressCss=function(){var e=this,t=e.options,n=t.fillDirection,r=t.indicatorImage,i=e.valueDiv,s=e._lastStep;r!==""&&i.css("background","transparent url("+r+") repeat fixed"),i.removeClass(a+" "+f+" "+l+" "+c).addClass(u+e.directions[n]),typeof s=="number"?e._isHorizontal()?i.css("width",s+"%").css("height",""):i.css("height",s+"%").css("width",""):i.css({width:"",height:""})},t.prototype._performAnimating=function(e,t,r){var i=this,s=i.options,o=s.indicatorIncrement,u=e/100,a=n.wijmo.wijprogressbar.div(u-i.min,i.max-i.min)*100,f=0,l,c,h=2;if(o){o!==1?a=Math.floor(a/o)*o:(a=Math.round(a),h=0),i.pointNumber=f;if(i._lastStep===a&&!t)return}i._refreshProgress(Number(a.toFixed(h)),Number(u.toFixed(h)),r),s.labelAlign==="running"&&i._updateRunningLabelCss(a)},t.prototype._getFormatString=function(e,t,n){var r=this,i=r.max-n,s=100-t,o=/\{0\}/g;return e=e.replace(o,n.toString()),o=/\{ProgressValue\}/g,e=e.replace(o,n.toString()),o=/\{1\}/g,e=e.replace(o,t.toString()),o=/\{PercentProgress\}/g,e=e.replace(o,t.toString()),o=/\{2\}/g,e=e.replace(o,i.toString()),o=/\{RemainingProgress\}/g,e=e.replace(o,i.toString()),o=/\{3\}/g,e=e.replace(o,s.toString()),o=/\{PercentageRemaining\}/g,e=e.replace(o,s.toString()),o=/\{4\}/g,e=e.replace(o,r.min),o=/\{Min\}/g,e=e.replace(o,r.min),o=/\{5\}/g,e=e.replace(o,r.max),o=/\{Max\}/g,e=e.replace(o,r.max),e},t.prototype.value=function(e){return n.ui.progressbar.prototype.value.apply(this,arguments)},t.prototype.destroy=function(){var e=this,t=e.element;t.attr("title","").removeClass(r+" "+r+"-east "+r+"-west "+r+"-north "+r+"-south"),e.label&&e.label.remove(),e.disabledDiv&&(e.disabledDiv.remove(),e.disabledDiv=null),n.ui.progressbar.prototype.destroy.apply(this,arguments)},t}(h);t.wijprogressbar=d,n.ui&&n.ui.progressbar&&(d.prototype.options=n.extend(!0,{},n.ui.progressbar.prototype.options,new p),n.wijmo.registerWidget("wijprogressbar",n.ui.progressbar,d.prototype),n.extend(n.wijmo.wijprogressbar,{animations:{progress:function(e,t){e=n.extend({easing:"swing",duration:1e3},e,t),e.content.stop(!0,!0).animate({pgvalue:e.progressValue},e)}},add:function(e,t){var n=0,r=0,i;try{n=e.toString().split(".")[1].length}catch(s){}try{r=t.toString().split(".")[1].length}catch(o){}return i=Math.pow(10,Math.max(n,r)),(e*i+t*i)/i},mul:function(e,t){var n=0,r=e.toString(),i=t.toString();try{n+=r.split(".")[1].length}catch(s){}try{n+=i.split(".")[1].length}catch(o){}return Number(r.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,n)},div:function(e,t){var n=0,r=0,i,s;try{n=e.toString().split(".")[1].length}catch(o){}try{r=t.toString().split(".")[1].length}catch(u){}return i=Number(e.toString().replace(".","")),s=Number(t.toString().replace(".","")),i/s*Math.pow(10,r-n)}}))})(e.progressbar||(e.progressbar={}));var t=e.progressbar})(wijmo||(wijmo={}));