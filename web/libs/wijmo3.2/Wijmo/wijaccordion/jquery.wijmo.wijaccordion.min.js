var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijaccordion",i=function(e){function t(){e.apply(this,arguments),this.widgetEventPrefix="wijaccordion"}return __extends(t,e),t.prototype._setOption=function(e,t){var r=this.options;if(r[e]!==t)switch(e){case"selectedIndex":this.activate(t);break;case"disabled":t?this.element.addClass(r.wijCSS.stateDisabled):this.element.removeClass(r.wijCSS.stateDisabled);break;case"event":this._unbindLiveEvents(),this.options.event=t,this._bindLiveEvents();break;case"header":this._handleHeaderChange(t,r.header);break;case"animated":break;case"expandDirection":this._onDirectionChange(t,!0,r.expandDirection);break;default:}n.wijmo.widget.prototype._setOption.apply(this,arguments)},t.prototype._handleHeaderChange=function(e,t){var n=this.element.find(t);n.removeClass("wijmo-wijaccordion-header "+this.options.wijCSS.stateActive+" "+this._triangleIconOpened).siblings(".wijmo-wijaccordion-content").removeClass("wijmo-wijaccordion-content "+this.options.wijCSS.content+" wijmo-wijaccordion-content-active"),this._initHeaders(e)},t.prototype._initHeaders=function(e){typeof e=="undefined"&&(e=null);var t=this.options,e=e?e:t.header,n=this.element.find(e);n.each(jQuery.proxy(this._initHeader,this))},t.prototype._initHeader=function(e,t){var r=this.options,i=this.element.data("rightToLeft"),s=n(t),o=n(s.next()[0]);i&&(s.remove(),s.insertAfter(o)),s.addClass("wijmo-wijaccordion-header").attr("role","tab"),o.attr("role","tabpanel"),s.find("> a").length===0&&s.wrapInner('<a href="#"></a>'),s.find("> .ui-icon").length===0&&n('<span class="ui-icon"></span>').insertBefore(n("> a",s)[0]),e===r.selectedIndex?(s.addClass(this.options.wijCSS.stateActive).addClass(this._headerCornerOpened).attr({"aria-expanded":"true",tabIndex:0}).find("> .ui-icon").addClass(this._triangleIconOpened),o.addClass("wijmo-wijaccordion-content-active").addClass(this._contentCornerOpened).wijTriggerVisibility()):(s.addClass(r.wijCSS.stateDefault+" ui-corner-all").attr({"aria-expanded":"false",tabIndex:-1}).find("> .ui-icon").addClass(this._triangleIconClosed),o.hide()),o.addClass("wijmo-wijaccordion-content "+this.options.wijCSS.content);for(;;){if(s.parent().hasClass("wijmo-wijaccordion"))break;s.unwrap()}},t.prototype._create=function(){var e=this.options,t=this;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),this.element.addClass("wijmo-wijaccordion "+e.wijCSS.widget+" wijmo-wijaccordion-icons "+"ui-helper-clearfix"),e.disabled&&this.element.addClass(e.wijCSS.stateDisabled),this._onDirectionChange(e.expandDirection,!1),this._initHeaders(),this.element.attr("role","tablist"),n(window).on("resize.wijaccordion",function(e){t._adjustAccordion()}),(e.expandDirection==="left"||e.expandDirection==="right")&&t._adjustAccordion(),n.wijmo.widget.prototype._create.apply(this,arguments)},t.prototype._init=function(){this._bindLiveEvents()},t.prototype._adjustAccordion=function(){if(this.options.expandDirection==="top"||this.options.expandDirection==="bottom")return;var e=this._getHeaders(),t=n(".wijmo-wijaccordion-content",this.element),r=t.parent().width(),i=parseInt(t.css("paddingLeft"),10)+parseInt(t.css("paddingRight"),10)+parseInt(t.css("borderRightWidth"),10)+parseInt(t.css("borderLeftWidth"),10),s=n(".wijmo-wijaccordion-header",this.element).outerWidth(!0),o=r-e.length*(s+4)-i,o=o<576?o:576;t.width(o)},t.prototype.destroy=function(){var e=this.options;this._unbindLiveEvents(),this.element.removeClass("wijmo-wijaccordion "+e.wijCSS.widget+" wijmo-wijaccordion-icons").removeAttr("role"),n(window).off("resize.wijaccordion"),n.wijmo.widget.prototype.destroy.apply(this,arguments)},t.prototype._getHeaders=function(){var e=this.options,t=this.element.data("rightToLeft"),r=[],i,s,o=this.element.find(e.header);if(!(o.length>0&&!n(o[0]).hasClass("wijmo-wijaccordion-header")&&n(o[0]).hasClass("wijmo-wijaccordion-content")))return o;for(i=0;i<o.length;i+=1)s=t?n(o[i]).next(".wijmo-wijaccordion-header"):n(o[i]).prev(".wijmo-wijaccordion-header"),s.length>0&&r.push(s[0]);return n(r)},t.prototype.activate=function(e){var t,r=this.options,i=this._getHeaders(),s,o,u=this.element.data("rightToLeft"),a,f,l,c,h,p,d,v,m,g;s=n(jQuery.grep(i,function(e){return n(e).hasClass(r.wijCSS.stateActive)})),typeof e=="number"?t=n(i[e]):typeof e=="string"?(e=parseInt(e,0),t=n(i[e])):(t=n(e),e=i.index(e));if(t.hasClass(r.wijCSS.stateDisabled))return!1;if(t.hasClass(r.wijCSS.stateActive))if(r.requireOpenedPane){if(s.length===t.length&&s.index()===t.index())return!1}else s=t,t=n(null);else r.requireOpenedPane||(s=n(null));a=i.index(t),f=i.index(s),l=u?t.prev(".wijmo-wijaccordion-content"):t.next(".wijmo-wijaccordion-content"),c=u?s.prev(".wijmo-wijaccordion-content"):s.next(".wijmo-wijaccordion-content");if(s.length===0&&t.length===0)return!1;o=l.css("width");if(!this._trigger("beforeSelectedIndexChanged",null,{newIndex:a,prevIndex:f}))return!1;s.removeClass(r.wijCSS.stateActive).removeClass(this._headerCornerOpened).addClass(r.wijCSS.stateDefault+" ui-corner-all").attr({"aria-expanded":"false",tabIndex:-1}).find("> .ui-icon").removeClass(this._triangleIconOpened).addClass(this._triangleIconClosed),t.removeClass(r.wijCSS.stateDefault+" ui-corner-all").addClass(r.wijCSS.stateActive).addClass(this._headerCornerOpened).attr({"aria-expanded":"true",tabIndex:0}).find("> .ui-icon").removeClass(this._triangleIconClosed).addClass(this._triangleIconOpened),r.animated?(h={toShow:l,toHide:c,complete:jQuery.proxy(function(){c.removeClass("wijmo-wijaccordion-content-active"),l.addClass("wijmo-wijaccordion-content-active").wijTriggerVisibility(),c.css("display",""),l.css("display",""),n.fn.wijlinechart&&(c.find(".wijmo-wijlinechart").wijlinechart("redraw"),l.find(".wijmo-wijlinechart").wijlinechart("redraw")),o!==null&&o!==undefined&&(r.expandDirection==="left"||r.expandDirection==="right")&&l.width(o),this._trigger("selectedIndexChanged",null,{newIndex:a,prevIndex:f})},this),horizontal:this.element.hasClass("ui-helper-horizontal"),rightToLeft:this.element.data("rightToLeft"),down:a>f,autoHeight:r.autoHeight||r.fillSpace},p=r.animated,d=r.duration,n.isFunction(p)&&(r.animated=p(h)),n.isFunction(d)&&(r.duration=d(h)),v=n.wijmo.wijaccordion.animations,m=r.duration,g=r.animated,g&&!v[g]&&!n.easing[g]&&(g="slide"),v[g]||(v[g]=function(e){this.slide(e,{easing:g,duration:m||700})}),v[g](h)):(s.length>0&&c.hide().removeClass("wijmo-wijaccordion-content-active"),t.length>0&&l.show().addClass("wijmo-wijaccordion-content-active").addClass(this._contentCornerOpened).wijTriggerVisibility(),n.fn.wijlinechart&&(c.find(".wijmo-wijlinechart").wijlinechart("redraw"),l.find(".wijmo-wijlinechart").wijlinechart("redraw")),o!==null&&o!==undefined&&(r.expandDirection==="left"||r.expandDirection==="right")&&l.width(o),this._trigger("selectedIndexChanged",null,{newIndex:a,prevIndex:f})),this.options.selectedIndex=a},t.prototype._bindLiveEvents=function(){var e=this;this.element.on(this.options.event+".wijaccordion",".wijmo-wijaccordion-header",jQuery.proxy(this._onHeaderClick,this)).on("keydown.wijaccordion",".wijmo-wijaccordion-header",jQuery.proxy(this._onHeaderKeyDown,this)).on("mouseenter.wijaccordion",".wijmo-wijaccordion-header",function(){n(this).addClass("ui-state-hover")}).on("mouseleave.wijaccordion",".wijmo-wijaccordion-header",function(){n(this).removeClass("ui-state-hover")}).on("focus.wijaccordion",".wijmo-wijaccordion-header",function(){n(this).addClass(e.options.wijCSS.stateFocus)}).on("blur.wijaccordion",".wijmo-wijaccordion-header",function(){n(this).removeClass(e.options.wijCSS.stateFocus)})},t.prototype._unbindLiveEvents=function(){this.element.off(".wijaccordion",".wijmo-wijaccordion-header")},t.prototype._onHeaderClick=function(e){return this.options.disabled||this.activate(e.currentTarget),!1},t.prototype._onHeaderKeyDown=function(e){if(this.options.disabled||e.altKey||e.ctrlKey)return;if(!n.ui)return;var t=n.ui.keyCode,r=this.element.find(".wijmo-wijaccordion-header."+this.options.wijCSS.stateFocus),i,s=this._getHeaders();if(r.length>0){i=n(".wijmo-wijaccordion-header",this.element).index(r);switch(e.keyCode){case t.RIGHT:case t.DOWN:if(s[i+1])return s[i+1].focus(),!1;break;case t.LEFT:case t.UP:if(s[i-1])return s[i-1].focus(),!1;break;case t.SPACE:case t.ENTER:this.activate(e.currentTarget),e.preventDefault()}}return!0},t.prototype._onDirectionChange=function(e,t,r){typeof r=="undefined"&&(r=null);var i,s,o,u,a,f,l=this.options;t&&(s=this.element.find(".wijmo-wijaccordion-header."+this._headerCornerOpened),s.removeClass(this._headerCornerOpened),o=this.element.find(".wijmo-wijaccordion-content."+this._contentCornerOpened),o.removeClass(this._contentCornerOpened),u=this.element.find("."+this._triangleIconOpened),a=this.element.find("."+this._triangleIconClosed),u.removeClass(this._triangleIconOpened),a.removeClass(this._triangleIconClosed)),r!==null&&this.element.removeClass("wijmo-wijaccordion-"+r);switch(e){case"top":this._headerCornerOpened="ui-corner-bottom",this._contentCornerOpened="ui-corner-top",this._triangleIconOpened=l.wijCSS.iconArrowUp,this._triangleIconClosed=l.wijCSS.iconArrowRight,i=!0,this.element.removeClass("ui-helper-horizontal"),this.element.addClass("wijmo-wijaccordion-top");break;case"right":this._headerCornerOpened="ui-corner-left",this._contentCornerOpened="ui-corner-right",this._triangleIconOpened=l.wijCSS.iconArrowRight,this._triangleIconClosed=l.wijCSS.iconArrowDown,i=!1,this.element.addClass("ui-helper-horizontal"),this.element.addClass("wijmo-wijaccordion-right");break;case"left":this._headerCornerOpened="ui-corner-right",this._contentCornerOpened="ui-corner-left",this._triangleIconOpened=l.wijCSS.iconArrowLeft,this._triangleIconClosed=l.wijCSS.iconArrowDown,i=!0,this.element.addClass("ui-helper-horizontal"),this.element.addClass("wijmo-wijaccordion-left");break;default:this._headerCornerOpened="ui-corner-top",this._contentCornerOpened="ui-corner-bottom",this._triangleIconOpened=l.wijCSS.iconArrowDown,this._triangleIconClosed=l.wijCSS.iconArrowRight,i=!1,this.element.removeClass("ui-helper-horizontal"),this.element.addClass("wijmo-wijaccordion-bottom")}f=this.element.data("rightToLeft"),this.element.data("rightToLeft",i),t&&(u.addClass(this._triangleIconOpened),a.addClass(this._triangleIconClosed),s.addClass(this._headerCornerOpened),o.addClass(this._contentCornerOpened)),t&&i!==f&&this.element.children(".wijmo-wijaccordion-header").each(function(e,t){var r=n(this),s;i?(s=r.next(".wijmo-wijaccordion-content"),r.remove(),r.insertAfter(s)):(s=r.prev(".wijmo-wijaccordion-content"),r.remove(),r.insertBefore(s))})},t}(e.wijmoWidget);t.wijaccordion=i;var s=function(){function e(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body ui-body-c"},this.initSelector=":jqmData(role='wijaccordion')",this.animated="slide",this.duration=null,this.event="click",this.disabled=!1,this.expandDirection="bottom",this.header="> li > :first-child,> :not(li):even",this.requireOpenedPane=!0,this.selectedIndex=0}return e}();i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new s),n.wijmo.registerWidget(r,i.prototype),n.extend(n.wijmo.wijaccordion,{animations:{slide:function(e,t){e=n.extend({easing:"swing",duration:300},e,t);var r,i;e.horizontal?(r={width:"show"},i={width:"hide"}):(r={height:"show"},i={height:"hide"});if(!e.toHide.size()){e.toShow.stop(!0,!0).animate(r,e);return}if(!e.toShow.size()){e.toHide.stop(!0,!0).animate(i,e);return}var s=e.toShow.css("overflow"),o=0,u={},a={},f,l=e.horizontal?["width","paddingLeft","paddingRight"]:["height","paddingTop","paddingBottom"],c,h=e.toShow;e.horizontal?(c=h[0].style.height,h.height(parseInt(h.parent().height(),10)-parseInt(h.css("paddingTop"),10)-parseInt(h.css("paddingBottom"),10)-(parseInt(h.css("borderTopWidth"),10)||0)-(parseInt(h.css("borderBottomWidth"),10)||0))):(c=h[0].style.width,h.width(parseInt(h.parent().width(),10)-parseInt(h.css("paddingLeft"),10)-parseInt(h.css("paddingRight"),10)-(parseInt(h.css("borderLeftWidth"),10)||0)-(parseInt(h.css("borderRightWidth"),10)||0))),n.each(l,function(t,r){a[r]="hide";var i=(""+n.css(e.toShow[0],r)).match(/^([\d+-.]+)(.*)$/);u[r]={value:i?i[1]:"0",unit:i?i[2]||"px":"px"}}),e.horizontal?f={width:0,overflow:"hidden"}:f={height:0,overflow:"hidden"},e.toShow.css(f).stop(!0,!0).show(),e.toHide.filter(":hidden").each(e.complete).end().filter(":visible").stop(!0,!0).animate(a,{step:function(t,n){var r;if(n.prop===e.horizontal?"width":"height")o=n.end-n.start===0?0:(n.now-n.start)/(n.end-n.start);r=o*u[n.prop].value,r<0&&(r=0),e.toShow[0].style[n.prop]=r+u[n.prop].unit},duration:e.duration,easing:e.easing,complete:function(){e.autoHeight||e.toShow.css(e.horizontal?"width":"height",""),e.toShow.css(e.horizontal?"height":"width",c),e.toShow.css({overflow:s}),e.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})})(e.accordion||(e.accordion={}));var t=e.accordion})(wijmo||(wijmo={}));